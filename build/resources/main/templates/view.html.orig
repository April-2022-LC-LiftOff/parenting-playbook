<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org/">
<head th:replace="fragments :: head">
</head>
<body class="container  body-content">

<h1 th:text="${'Intervention: ' + intervention.name}">Parenting Playbook</h1>

<nav th:replace="fragments :: page-header"></nav>

<div class="edit-class">
    <p class="standout">Domain(s):</p>
    <ul>
        <li th:each="domain : ${intervention.domains}" style="list-style-type: none;font-size:18px;">
            <a th:href="@{'/domains/view/' + ${domain.id}}" th:text="${domain.domain}"></a>
        </li>
    </ul>
    <a th:if="${initialUser}" th:href="@{'/edit/domains/' + ${intervention.id}}" class="small-links">Edit Domains</a>
    <p class="standout" style="margin-top:20px;">Tag(s):</p>
    <ul>
        <li th:each="tag : ${intervention.tags}" style="list-style-type: none;font-size:18px;">
            <a th:href="@{'/tags/view/' + ${tag.id}}" th:text="${tag.tagName}"></a>
        </li>
    </ul>
    <a th:if="${initialUser}" th:href="@{'/edit/tags/' + ${intervention.id}}" class="small-links">Edit Tags</a>

    <p class="standout" style="margin-top:20px;">Name: </p>
    <p th:text="${intervention.name}"></p>
    <a th:if="${initialUser}" th:href="@{'/edit/name/' + ${intervention.id}}" class="small-links">Edit Name</a>


    <p class="standout" style="margin-top:20px;">Action: </p>
    <p th:text="${intervention.action}"></p>
    <a th:if="${initialUser}" th:href="@{'/edit/action/' + ${intervention.id}}" class="small-links">Edit Action</a>

    <p class="standout" style="margin-top:20px;">Expected Response: </p>
    <p th:text="${intervention.expectedResponse}"></p>
    <a th:if="${initialUser}" th:href="@{'/edit/expectedResponse/' + ${intervention.id}}" class="small-links">Edit
        Expected Response</a>

    <p class="standout" style="margin-top:20px;">Reference: </p>
    <p th:text="${intervention.reference}"></p>
    <a th:if="${initialUser}" th:href="@{'/edit/reference/' + ${intervention.id}}" class="small-links">Edit
        Reference</a>

    <p class="standout" style="margin-top:20px;">If it fails, try: </p>
    <p th:text="${intervention.ifItFails}"></p>
    <a th:if="${initialUser}" th:href="@{'/edit/ifItFails/' + ${intervention.id}}" class="small-links">Edit If It
        Fails</a>
</div>
<div>
    <a th:if="${initialUser}" th:href="@{'/edit/delete/' + ${intervention.id}}" class="small-links">Delete
        Intervention</a>
</div>

<br><br>
<div>
    <h3>Latest Comment(s): </h3>
    <div class="container" style="background-color: rgba(255,255,255,0.1);">
        <table class="table" style="color:white;">
            <thead>
            <tr style="color: white">
                <!--                <th>Intervention ID</th>-->
                <th>Intervention Name</th>
                <th>User</th>
                <th>Comment</th>
                <th>Posted Date</th>
            </tr>
            </thead>
            <tbody th:if="${intervention.comments} !=null" align="left">
            <tr th:each="comment : ${intervention.comments}">
                <!--                <td th:text="${intervention.id}"></td>-->
                <td th:text="${intervention.name}"></td>
                <td th:text="${comment.user.username}"></td>
                <td th:text="${comment.userInput}"></td>
                <td th:text="${comment.postedDate}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<br>

<span th:if="${intervention.comments.size} == 0" style="color: white">
        Be the first one to leave a comment!
    </span>
<br>
<div class="container" th:unless="${user}" style="color: white">
    <h3>Login or join us to leave a comment!</h3>
</div>
<div class="container" th:if="${user} != null">
    <h3 style="color: white">Leave a Comment: </h3>

    <form method="post">
        <div class="form-group">
            <input type="hidden" th:field="*{user}" class="form-control">
            <input type="hidden" th:field="*{intervention}" class="form-control">
            <textarea rows="5" class="form-control" th:field="${comment.userInput}" placeholder="Have any thoughts?"
                      required="required"></textarea>
            <span th:errors="${comment.userInput}" class="error"></span>
            <br>
            <button class="btn btn-success btn-md" type="submit">Add Comment</button>
        </div>
    </form>

</div>
<div class="footer">
</div>
</body>
</html>
